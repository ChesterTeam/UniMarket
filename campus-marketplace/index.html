<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>UniMarket - Студенческий маркетплейс</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Хедер -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <h2>UniMarket</h2>
            </div>
            <div class="nav-links">
                <a href="index.html" class="nav-link active">Главная</a>
                <a href="pages/catalog.html" class="nav-link">Каталог</a>
                <a href="pages/profile.html" class="nav-link profile-btn" style="display: none;">Профиль</a>
                <a href="#" class="nav-link login-btn" id="loginBtn">Войти</a>
            </div>
            <div class="mobile-menu-toggle" id="mobileMenuToggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <!-- Основной контент -->
    <main class="main-content">
        <!-- Героический блок с поиском -->
        <section class="hero-section">
            <div class="hero-content">
                <h1 class="hero-title">Всё для учёбы в одном месте</h1>
                <p class="hero-subtitle">Покупай, продавай, обменивай учебные материалы и находи репетиторов в своём университете</p>
                
                <div class="search-container">
                    <div class="search-box">
                        <svg class="search-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <input type="text" id="searchInput" placeholder="Найти учебники, канцтовары, услуги..." class="search-input">
                        <button type="button" class="search-btn" id="searchBtn">Найти</button>
                    </div>
                    <div class="search-suggestions" id="searchSuggestions"></div>
                </div>
            </div>
        </section>

        <!-- Категории -->
        <section class="categories-section">
            <div class="container">
                <h2 class="section-title">Популярные категории</h2>
                <div class="categories-grid">
                    <div class="category-card" data-category="textbooks">
                        <div class="category-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" stroke="currentColor" stroke-width="2"/>
                                <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3 class="category-title">Учебники</h3>
                        <p class="category-description">Новые и б/у учебники по всем предметам</p>
                    </div>

                    <div class="category-card" data-category="supplies">
                        <div class="category-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3 class="category-title">Канцтовары</h3>
                        <p class="category-description">Тетради, ручки, папки и всё для учёбы</p>
                    </div>

                    <div class="category-card" data-category="rental">
                        <div class="category-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                <rect x="2" y="3" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
                                <line x1="8" y1="21" x2="16" y2="21" stroke="currentColor" stroke-width="2"/>
                                <line x1="12" y1="17" x2="12" y2="21" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3 class="category-title">Аренда оборудования</h3>
                        <p class="category-description">Ноутбуки, планшеты, проекторы напрокат</p>
                    </div>

                    <div class="category-card" data-category="services">
                        <div class="category-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="2"/>
                                <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h3 class="category-title">Услуги</h3>
                        <p class="category-description">Репетиторство, помощь с курсовыми</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Популярные объявления -->
        <section class="popular-section">
            <div class="container">
                <h2 class="section-title">Популярные объявления</h2>
                <div class="listings-grid" id="popularListings">
                    <!-- Динамически загружаемые объявления -->
                </div>
                <div class="view-all-container">
                    <a href="pages/catalog.html" class="view-all-btn">Посмотреть все объявления</a>
                    <button class="btn-primary" id="addListingBtn" style="margin-left: 20px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Создать объявление
                    </button>
                    <button class="btn-secondary" id="clearCatalogBtn" onclick="CampusMarketplaceDB.clearCatalog()" style="margin-left: 20px;">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
                            <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Очистить каталог
                    </button>
                                    <button class="btn-secondary" id="syncCatalogBtn" onclick="CampusMarketplaceDB.syncCatalog()" style="margin-left: 20px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
                        <path d="M1 4v6h6" stroke="currentColor" stroke-width="2"/>
                        <path d="M23 20v-6h-6" stroke="currentColor" stroke-width="2"/>
                        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    Синхронизировать каталог
                </button>
                <button class="btn-secondary" id="forceClearAllBtn" onclick="CampusMarketplaceDB.forceClearAllData()" style="margin-left: 20px; background-color: #dc3545; color: white; border: none;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="margin-right: 8px;">
                        <path d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    ПРИНУДИТЕЛЬНО ОЧИСТИТЬ ВСЕ
                </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Подвал -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>UniMarket</h3>
                    <p>Студенческий маркетплейс для покупки, продажи и обмена учебных материалов</p>
                </div>
                <div class="footer-section">
                    <h4>Категории</h4>
                    <ul>
                        <li><a href="pages/catalog.html?category=textbooks">Учебники</a></li>
                        <li><a href="pages/catalog.html?category=supplies">Канцтовары</a></li>
                        <li><a href="pages/catalog.html?category=rental">Аренда</a></li>
                        <li><a href="pages/catalog.html?category=services">Услуги</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Помощь</h4>
                    <ul>
                        <li><a href="#" id="supportLink">Поддержка</a></li>
                        <li><a href="#" id="faqLink">Частые вопросы</a></li>
                        <li><a href="#" id="rulesLink">Правила</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 UniMarket. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <!-- Модальные окна -->
    
    <!-- Модальное окно добавления объявления -->
    <div class="modal" id="addListingModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Добавить новое объявление</h3>
                <button class="modal-close" id="addListingModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form id="addListingForm" class="add-listing-form">
                    <div class="form-group">
                        <label for="listingTitle">Название товара *</label>
                        <input type="text" id="listingTitle" name="title" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="listingDescription">Описание *</label>
                        <textarea id="listingDescription" name="description" rows="4" required></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="listingPrice">Цена (₽) *</label>
                            <input type="number" id="listingPrice" name="price" min="0" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="listingCategory">Категория *</label>
                            <select id="listingCategory" name="category" required>
                                <option value="">Выберите категорию</option>
                                <option value="textbooks">Учебники</option>
                                <option value="supplies">Канцтовары</option>
                                <option value="rental">Аренда оборудования</option>
                                <option value="services">Услуги</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="listingCondition">Состояние *</label>
                            <select id="listingCondition" name="condition" required>
                                <option value="">Выберите состояние</option>
                                <option value="new">Новое</option>
                                <option value="excellent">Отличное</option>
                                <option value="good">Хорошее</option>
                                <option value="fair">Удовлетворительное</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="listingImage">URL изображения</label>
                            <input type="url" id="listingImage" name="image" placeholder="https://example.com/image.jpg">
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="cancelAddListing">Отмена</button>
                        <button type="submit" class="btn-primary">Добавить объявление</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Вход в аккаунт</h3>
                <button class="modal-close" id="loginModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <form class="login-form" id="staticLoginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Пароль</label>
                        <input type="password" id="loginPassword" name="password" required>
                    </div>
                    <button type="submit" class="btn-primary">Войти</button>
                </form>

                <p class="register-link">Нет аккаунта? <a href="/pages/register.html" id="registerLink">Зарегистрироваться</a></p>
            </div>
        </div>
    </div>

    <!-- Подключение скриптов -->
    <script src="js/database.js"></script>
    <script src="js/api_adapter.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/main.js"></script>
    <script src="js/search.js"></script>
</body>
</html>
